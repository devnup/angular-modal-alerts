angular.module("com.devnup.alert",[]).config(function(a){a.interceptors.push("httpInterceptor")}).directive("preloader",function(a,b,c){return{restrict:"A",link:function(d,e,f){if(f&&(f.src||f.preloader)){jQuery("body").addClass("remove-scroll");var g=d.$eval(f.src||f.preloader);a.get(g,{cache:b}).success(function(a){e.replaceWith(c(a)(d))})}}}}).factory("httpInterceptor",function(a,b){var c=b.config(),d={preloader:c&&c.preloader&&c.preloader.auto,loading:c&&c.loading&&c.loading.auto},e=d.preloader&&d.loading,f=0;return{request:function(a){return f++,d.loading&&b.loading(),a},requestError:function(c){return f--,!e&&d.loading&&0>=f?b.closeLoading():!e&&d.preloader?b.preloader():e&&b.closeAll(),a.reject(c)},response:function(a){return f--,!e&&d.loading&&0>=f?b.closeLoading():!e&&d.preloader?b.preloader():e&&b.closeAll(),a},responseError:function(c){return f--,!e&&d.loading&&0>=f?b.closeLoading():!e&&d.preloader?b.preloader():e&&b.closeAll(),a.reject(c)}}}).factory("$alert",["$rootScope",function(a){var b={},c=function(a,c){switch(b[a]=c,a){case"success":jQuery("#alert-success").addClass("open");break;case"warning":jQuery("#alert-warning").addClass("open");break;case"danger":jQuery("#alert-danger").addClass("open");break;case"error":jQuery("#alert-error").addClass("open");break;case"info":jQuery("#alert-info").addClass("open");break;case"input":jQuery("#alert-input").addClass("open");break;case"loading":jQuery("#alert-loading").addClass("open"),jQuery("#alert-loading-img").attr("src",c.image||"assets/img/loader.gif")}return b[a]},d={init:function(a){return b[a]},config:function(a){if(a&&Object.keys(a).length)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]||b[c]);return b},preloader:function(){a.preloader?a.preloader():void 0},closeAll:function(){d.preloader(),d.closeLoading(),d.close()},info:function(a){c("info",a)},success:function(a){c("success",a)},error:function(a){c("error",a)},danger:function(a){c("danger",a)},warning:function(a){c("warning",a)},input:function(a){c("input",a)},loading:function(a){a=a||b.loading||{},a.style=a.style||b.loading.style||{},c("loading",{image:a.image||b.loading.image,style:{width:a.style.width||100,height:a.style.height||100,marginLeft:-(a.style.width/2),marginTop:-(a.style.height/2)}})},closeLoading:function(){jQuery("#alert-loading").removeClass("open")},close:function(){jQuery(".alert-modal").removeClass("open")}};return d}]).controller("AlertModalCtrl",["$scope","$alert","$rootScope",function(a,b,c){a.init=function(d){return a.type=d,"preloader"===d?(c.preloader=function(){jQuery(".preloader").fadeOut(),jQuery("body").removeClass("remove-scroll")},a.preloader=b.init(a.type),a.preloader):"loading"===d?(a.loading=b.init(a.type),a.loading):b.init(a.type)},a.$watch("init(type)",function(b){a.alert=b}),a.ok=function(){var b=a.alert.ok;b&&typeof b==typeof angular.noop&&b(),a.close()},a.confirm=function(){var b=a.alert.confirm;b&&typeof b==typeof angular.noop&&b(),a.close()},a.submit=function(){var b=a.alert.submit;b&&typeof b==typeof angular.noop&&b(a.alert.value||a.alert.input),a.close()},a.cancel=function(){var b=a.alert.cancel;b&&typeof b==typeof angular.noop&&b(),a.close()},a.close=function(){jQuery(".alert-modal").removeClass("open")},a.closeLoading=function(){jQuery("#alert-loading").removeClass("open")}}]);