/*! angular-modal-alerts - v0.0.14 - 2015-05-26 */

'use strict';
angular.module("com.devnup.alert",[]).factory("templateEngine",["$http","$templateCache","$compile",function($http,$templateCache,$compile){return function(input){if(typeof input.element===typeof"string"){input.element=angular.element(input.element)}var scope=input.element.scope();$http.get(input.templateUrl,{cache:$templateCache}).success(function(tplContent){if(!!input.replace){input.element.replaceWith($compile(tplContent)(scope))}else{input.element.html($compile(tplContent)(scope))}if(input.success){input.success(input.element)}})}}]).factory("$alert",["$rootScope","templateEngine",function($rootScope,templateEngine){var cache={};var constructor=function(type,input){cache[type]=input;switch(type){case"modal":templateEngine({element:"#alert-custom-body",templateUrl:input.url||input.templateUrl,success:function(){angular.element("#alert-custom").addClass("open")}});break;case"success":angular.element("#alert-success").addClass("open");break;case"warning":angular.element("#alert-warning").addClass("open");break;case"danger":angular.element("#alert-danger").addClass("open");break;case"error":angular.element("#alert-error").addClass("open");break;case"info":angular.element("#alert-info").addClass("open");break;case"input":angular.element("#alert-input").addClass("open");break;case"loading":angular.element("#alert-loading").addClass("open");angular.element("#alert-loading-img").attr("src",input.image||"assets/img/loader.gif");break;default:break}return cache[type]};var methods={init:function(type){return cache[type]},config:function(input){if(input&&input.preloader){console.error("angular modal alerts: Preloader deprecated, ignoring...");delete input.preloader}if(input&&Object.keys(input).length){for(var k in input){if(input.hasOwnProperty(k)){cache[k]=input[k]||cache[k]}}}return cache},modal:function(input){return constructor("modal",input)},info:function(input){return constructor("info",input)},success:function(input){return constructor("success",input)},error:function(input){return constructor("error",input)},danger:function(input){return constructor("danger",input)},warning:function(input){return constructor("warning",input)},input:function(input){return constructor("input",input)},loading:function(input){input=input||cache["loading"]||{};input.style=input.style||cache["loading"].style||{};return constructor("loading",{image:input.image||cache["loading"].image,style:{width:input.style.width||100,height:input.style.height||100,marginLeft:-(input.style.width/2),marginTop:-(input.style.height/2)}})},closeLoading:function(){angular.element("#alert-loading").removeClass("open")},close:function(){angular.element(".alert-modal").removeClass("open")},closeAll:function(){methods.closeLoading();methods.close()}};return methods}]).controller("AlertModalCtrl",["$scope","$alert","$rootScope",function($scope,$alert,$rootScope){$scope.loading={};$scope.init=function(type){$scope.type=type;if(type==="loading"){$scope.loading=$alert.init($scope.type);return $scope.loading}return $alert.init($scope.type)};$scope.$watch("init(type)",function(alert){$scope.alert=alert});$scope.ok=function(){var fn=$scope.alert.ok;if(fn&&typeof fn===typeof angular.noop){fn()}$scope.close()};$scope.confirm=function(){var fn=$scope.alert.confirm;if(fn&&typeof fn===typeof angular.noop){fn()}$scope.close()};$scope.submit=function(){var fn=$scope.alert.submit;if(fn&&typeof fn===typeof angular.noop){fn($scope.alert.value||$scope.alert.input)}$scope.close()};$scope.cancel=function(){var fn=$scope.alert.cancel;if(fn&&typeof fn===typeof angular.noop){fn()}$scope.close()};$scope.close=function(){$alert.close()};$scope.closeLoading=function(){$alert.closeLoading()}}]);